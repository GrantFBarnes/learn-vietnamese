<app-loading *ngIf="loading"></app-loading>
<div [ngClass]="loading ? 'container blur' : 'container'">
  <app-title [title]="{ english: 'Quiz', vietnamese: '' }"></app-title>

  <div class="row center mb-2">
    <div class="col-12">
      <button type="button" class="btn btn-primary" (click)="nextQuestion()">
        Next Question
      </button>
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-md-6 mb-2">
      <div class="card bg-dark">
        <div class="card-body">
          <p class="card-title">What does the following translate to?</p>
          <h1 class="card-text total-center">
            {{
              cards[correct_idx]
                ? question_type === "Vietnamese"
                  ? cards[correct_idx].word
                  : cards[correct_idx].translation
                : "Not Enough Data"
            }}
          </h1>
        </div>
      </div>
    </div>
    <div class="col-md-6 mb-2">
      <div class="card bg-dark">
        <div class="card-body">
          <p class="card-title">Select an Answer</p>
          <h1 *ngIf="!cards[correct_idx]" class="card-text total-center">
            Not Enough Data
          </h1>
          <ng-container *ngFor="let card of cards; let i = index">
            <app-quiz-answer
              [card]="card"
              [correct]="correct_idx === i"
              [question_type]="question_type"
            ></app-quiz-answer>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
  <div class="row center">
    <div class="col-md-4 mb-2">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
        >
          {{ question_type_selected }}
        </button>
        <ul class="dropdown-menu dropdown-menu-dark">
          <ng-container *ngFor="let option of question_type_options">
            <li>
              <a
                [ngClass]="
                  question_type_selected == option
                    ? 'dropdown-item active'
                    : 'dropdown-item'
                "
                (click)="setQuestionType(option)"
              >
                {{ option }}
              </a>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
    <div class="col-md-4 mb-2">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
        >
          {{ category_name }}
        </button>
        <ul class="dropdown-menu dropdown-menu-dark">
          <ng-container *ngFor="let option of categories">
            <li>
              <a
                [ngClass]="
                  category_id == option.id
                    ? 'dropdown-item active'
                    : 'dropdown-item'
                "
                (click)="setCategory(option.id, option.name)"
              >
                {{ option.name }}
              </a>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
    <div class="col-md-4 mb-2">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
        >
          {{ answer_count }} Options
        </button>
        <ul class="dropdown-menu dropdown-menu-dark">
          <ng-container *ngFor="let option of answer_count_options">
            <li>
              <a
                [ngClass]="
                  answer_count == option
                    ? 'dropdown-item active'
                    : 'dropdown-item'
                "
                (click)="setAnswerCount(option)"
              >
                {{ option }} Options
              </a>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
  </div>
</div>
